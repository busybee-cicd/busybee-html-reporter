<div class="card">
    <div class="test-header">
        <a data-toggle="collapse" href="#{{test.htmlID}}" role="button"">
        {{test.id}}
        </a>

        <div>
            <i class="fa {{#if test.pass}}fa-check-circle green{{else}}fa-exclamation-circle red{{/if}} fa-2"></i>
        </div>
    </div>
    <div id="{{test.htmlID}}" class="collapse test-content" role="tabpanel" data-parent="#testSetAccordian_{{testSetID}}">
        <div>
            <a data-toggle="collapse" href="#request{{test.htmlID}}" role="button">
                Request
            </a>
        </div>
        <div id="request{{test.htmlID}}" class="collapse" style="margin-bottom: 1em;">
            <div id="requestBtns-{{test.htmlID}}"
                 style="margin-bottom: 1em"
                 role="group">
                <button type="button" class="btn btn-sm btn-secondary active" onclick="showRequest('pretty', '{{test.htmlID}}')">pretty</button>
                <button type="button" class="btn btn-sm btn-secondary" onclick="showRequest('raw', '{{test.htmlID}}')">raw</button>
            </div>
            <div id="request-pretty-{{test.htmlID}}">
                {{jsonPretty test.request}}
            </div>
            <div id="request-raw-{{test.htmlID}}" style="display: none;">
                {{jsonRaw test.request}}
            </div>
        </div>

        <div>
            <a data-toggle="collapse" href="#response{{test.htmlID}}" role="button">
                Response
            </a>
        </div>
        <div id="response{{test.htmlID}}" class="collapse">
            {{#if test.assertionModifications}}
                <div style="margin-left: 1em">
                    <div style="display: inline-block">
                        <a data-toggle="collapse" href="#assertionMods{{test.htmlID}}" role="button">
                            Assertion Modifications
                        </a>
                        <i class="fa fa-exclamation-circle fa-2"></i>
                    </div>
                    <div id="assertionMods{{test.htmlID}}" class="collapse">
                        {{jsonPretty test.assertionModifications}}
                    </div>
                </div>
            {{/if}}
            <nav>
                <div class="nav nav-tabs" id="nav-tab-{{test.htmlID}}" role="tablist">
                    {{#if test.status}}
                        <a class="nav-item nav-link"
                           id="nav-status-tab-{{test.htmlID}}"
                           data-toggle="tab"
                           href="#nav-status-{{test.htmlID}}"
                           role="tab">Status</a>
                    {{/if}}

                    {{#if test.headers}}
                        <a class="nav-item nav-link"
                           id="nav-headers-tab-{{test.htmlID}}"
                           data-toggle="tab"
                           href="#nav-headers-{{test.htmlID}}"
                           role="tab">Headers</a>
                    {{/if}}

                    {{#if test.body}}
                        <a class="nav-item nav-link"
                           id="nav-body-tab-{{test.htmlID}}"
                           data-toggle="tab"
                           href="#nav-body-{{test.htmlID}}"
                           role="tab">Body</a>
                    {{/if}}
                </div>
            </nav>
            <div class="tab-content" id="nav-tabContent-{{test.htmlID}}">
                {{#if test.status}}
                    <div class="tab-pane fade" id="nav-status-{{test.htmlID}}" role="tabpanel"">
                        {{#if test.status.pass}}
                            {{ test.status.actual }}
                        {{else}}
                            {{> compare id=test.htmlID responsePart="status" payload=test.status }}
                        {{/if}}
                    </div>
                {{/if}}


                {{#if test.headers}}
                    <div class="tab-pane fade" id="nav-headers-{{test.htmlID}}" role="tabpanel">
                        {{#if test.headers.pass}}
                            {{jsonPretty test.headers.actual }}
                        {{else}}
                            {{> compare id=test.htmlID responsePart="headers" payload=test.headers }}
                        {{/if}}
                    </div>
                {{/if}}


                {{#if body}}
                    <div class="tab-pane fade" id="nav-body-{{test.htmlID}}" role="tabpanel">
                        {{#if test.body}}
                            {{jsonPretty test.body.actual }}
                        {{else}}
                            {{> compare id=test.htmlID responsePart="body" payload=test.body }}
                        {{/if}}
                    </div>
                {{/if}}
            </div>
        </div>
    </div>
</div>